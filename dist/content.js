!function(){const e="easyerp_credentials";function t(){if(!window.location.href.includes("erp.iitkgp.ac.in"))return;const t=prompt("🔐 EasyERP AutoLogin\n\nEnter your Login ID:");if(!t)return;const n=prompt("🔐 EasyERP AutoLogin\n\nEnter your Password:");if(!n)return;const o={},r=prompt("🔐 EasyERP AutoLogin\n\nEnter your FIRST security question:");if(!r)return;const s=prompt(`🔐 EasyERP AutoLogin\n\nAnswer to: "${r}"`);if(!s)return;o[r]=s;const i=prompt("🔐 EasyERP AutoLogin\n\nEnter your SECOND security question:");if(!i)return;const u=prompt(`🔐 EasyERP AutoLogin\n\nAnswer to: "${i}"`);if(!u)return;o[i]=u;const c=prompt("🔐 EasyERP AutoLogin\n\nEnter your THIRD security question:");if(!c)return;const a=prompt(`🔐 EasyERP AutoLogin\n\nAnswer to: "${c}"`);if(!a)return;o[c]=a;const l={loginId:t,password:n,questions:o};chrome.storage.local.set({[e]:l},()=>{chrome.runtime.lastError?alert("❌ Error saving credentials. Please try again."):alert("✅ Credentials saved! Please reload the page to start auto-login.")})}function n(){chrome.storage.local.get([e],n=>{chrome.runtime.lastError||(n[e]&&0!==Object.keys(n[e]||{}).length?setTimeout(()=>{!function(t){const n=document.querySelector('input[name="user_id"]'),o=document.querySelector('input[name="password"]'),r=document.querySelector('input[name="email_otp"]');n&&o&&(n.focus(),n.value=t.loginId,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout(()=>{o.focus(),o.value=t.password,o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(new Event("change",{bubbles:!0})),o.blur();const n=new MutationObserver(()=>{const o=document.querySelector('input[name="answer"]'),s=document.querySelector("label#question");if(o&&s&&null!==o.offsetParent){const i=s.textContent.trim(),u=t.questions[i];if(!u){const n=prompt(`❓ Security Question:\n\n${i}\n\nPlease provide the answer:`);n&&(t.questions[i]=n,chrome.storage.local.set({[e]:t})),u=n}if(u){o.focus(),o.value=u,o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(new Event("change",{bubbles:!0})),o.blur(),n.disconnect();const e=document.querySelector("#getotp");e&&e.click(),setTimeout(()=>{const e=prompt("📱 EasyERP AutoLogin\n\nStep 6: Enter the 6-digit OTP sent to your email:");if(r&&e){r.value=e,r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0}));const t=document.querySelector("#loginFormSubmitButton");t&&t.click()}},2e3)}}});n.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{n.disconnect()},3e4)},1200))}(n[e])},500):setTimeout(()=>{t()},1e3))})}window.EasyERPAutoLogin={setupCredentials:t,clearCredentials:()=>{chrome.storage.local.remove([e],()=>{alert("Credentials cleared! Reload page to set up new credentials.")})},viewCredentials:()=>{chrome.storage.local.get([e],t=>{t[e]})}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();